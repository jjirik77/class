<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noun Navigator | LEXIS v2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Inter:wght@300;400;500;600&display=swap');
        
        :root {
            --glass: rgba(15, 23, 42, 0.65);
            --glass-border: rgba(255, 255, 255, 0.08);
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617;
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(99, 102, 241, 0.15) 0%, transparent 35%),
                radial-gradient(circle at 100% 100%, rgba(16, 185, 129, 0.1) 0%, transparent 35%);
            color: #f1f5f9;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .font-header { font-family: 'Space Grotesk', sans-serif; }

        /* Modern Glassmorphism */
        .glass {
            background: var(--glass);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .glass-hover {
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .glass-hover:hover {
            background: rgba(255, 255, 255, 0.03);
            border-color: rgba(99, 102, 241, 0.4);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
        }

        /* Active State */
        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-link.active-tab {
            color: #fff;
        }

        .nav-link.active-tab::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 2px;
            background: var(--accent);
            border-radius: 2px;
            box-shadow: 0 0 10px var(--accent-glow);
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-reveal { animation: fadeInUp 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards; }

        .category-btn {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.2s ease;
        }

        .category-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--accent-glow);
            transform: scale(1.03);
        }

        .category-btn:active { transform: scale(0.97); }

        /* Feedback Effects */
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* Progress Bars */
        .progress-container {
            height: 4px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), #818cf8);
            transition: width 0.1s linear;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
    </style>
</head>
<body class="flex flex-col">

    <!-- Header Navigation -->
    <header class="h-20 flex items-center px-8 border-b border-white/5 sticky top-0 z-50 bg-[#020617]/80 backdrop-blur-xl">
        <div class="max-w-7xl mx-auto w-full flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20">
                    <span class="font-header font-bold text-lg">L</span>
                </div>
                <div class="hidden sm:block">
                    <h1 class="font-header font-bold text-sm tracking-widest uppercase text-white/90">LEXIS Protocol</h1>
                    <p class="text-[10px] text-indigo-400 font-medium uppercase tracking-[0.2em]">Semantic Interface v2.0</p>
                </div>
            </div>

            <nav class="flex items-center gap-10">
                <button onclick="switchView('explorer')" id="nav-explorer" class="nav-link active-tab text-xs font-bold uppercase tracking-widest text-white/40 hover:text-white/80 transition-all">Database</button>
                <button onclick="switchView('game')" id="nav-game" class="nav-link text-xs font-bold uppercase tracking-widest text-white/40 hover:text-white/80 transition-all">Stabilize</button>
            </nav>

            <div class="flex items-center gap-6">
                <div class="text-right hidden md:block">
                    <p class="text-[9px] uppercase font-bold text-white/30 tracking-widest mb-0.5">Peak Integrity</p>
                    <p id="high-score" class="font-header text-sm font-bold text-indigo-400 tracking-wider">0000</p>
                </div>
                <div class="px-4 py-2 rounded-full glass border-white/10 flex items-center gap-3">
                    <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                    <span class="text-[10px] font-bold text-white/70 tracking-widest">EXP: <span id="exp-points" class="text-white">0</span></span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto w-full p-8 flex-grow">
        
        <!-- EXPLORER: DATABASE -->
        <section id="view-explorer" class="animate-reveal space-y-12">
            <div class="max-w-2xl">
                <h2 class="text-4xl font-header font-bold text-white mb-3">Linguistic Assets</h2>
                <p class="text-slate-400 text-lg leading-relaxed font-light">Explore the categorized nodes of the Semantic Database before attempting stabilization.</p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6" id="db-grid">
                <!-- Injected Cards -->
            </div>
        </section>

        <!-- GAME: STABILIZER -->
        <section id="view-game" class="hidden animate-reveal max-w-5xl mx-auto">
            <div id="game-intro" class="glass rounded-[2rem] p-16 text-center border-white/5 relative overflow-hidden">
                <div class="relative z-10">
                    <div class="mb-8 inline-flex p-5 rounded-2xl bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-4xl shadow-inner">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h2 class="text-5xl font-header font-bold mb-6 text-white">System Integrity Check</h2>
                    <p class="text-slate-400 mb-10 max-w-lg mx-auto text-lg font-light leading-relaxed">
                        LEXIS is experiencing data decay. Re-align the identified nouns within the provided contexts to maintain system stability.
                    </p>
                    <button onclick="startGame()" class="px-12 py-5 bg-white text-slate-950 font-bold rounded-2xl hover:bg-indigo-50 transition-all hover:scale-105 shadow-xl">
                        Initialize Re-alignment
                    </button>
                </div>
            </div>

            <div id="game-active" class="hidden space-y-8">
                <!-- Stats Bar -->
                <div class="grid grid-cols-3 gap-6">
                    <div class="glass p-6 rounded-3xl">
                        <p class="text-[10px] uppercase font-bold text-slate-500 tracking-widest mb-3">Buffer Stability</p>
                        <div class="progress-container">
                            <div id="timer-bar" class="progress-bar" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="glass p-6 rounded-3xl text-center">
                        <p class="text-[10px] uppercase font-bold text-slate-500 tracking-widest mb-1">Encrypted Data</p>
                        <p id="game-score" class="text-2xl font-header font-bold text-white">0</p>
                    </div>
                    <div class="glass p-6 rounded-3xl text-center">
                        <p class="text-[10px] uppercase font-bold text-slate-500 tracking-widest mb-1">Synaptic Multiplier</p>
                        <p id="game-streak" class="text-2xl font-header font-bold text-emerald-400">x0</p>
                    </div>
                </div>

                <!-- Game Canvas -->
                <div id="game-container" class="glass rounded-[2.5rem] p-16 min-h-[350px] flex flex-col items-center justify-center text-center relative border-white/5">
                    <div class="space-y-10 w-full max-w-3xl">
                        <div class="inline-block px-4 py-1.5 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold tracking-[0.3em] text-white/40 uppercase">
                            Segment Scan in Progress
                        </div>
                        <div id="sentence-display" class="text-3xl md:text-4xl font-light text-white leading-snug transition-opacity duration-300">
                            <!-- Sentence -->
                        </div>
                        <div>
                            <button id="hint-btn" onclick="useHint()" class="text-[11px] font-bold uppercase tracking-widest text-indigo-400/60 hover:text-indigo-400 transition-colors">
                                <i class="fas fa-microscope mr-2"></i> Enhance Scan Fragment (Hint)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Input Interface -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="handleAnswer('Common')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Common</button>
                    <button onclick="handleAnswer('Proper')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Proper</button>
                    <button onclick="handleAnswer('Collective')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Collective</button>
                    <button onclick="handleAnswer('Abstract')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Abstract</button>
                    <button onclick="handleAnswer('Concrete')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Concrete</button>
                    <button onclick="handleAnswer('Compound')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Compound</button>
                    <button onclick="handleAnswer('Countable')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Countable</button>
                    <button onclick="handleAnswer('Uncountable')" class="category-btn py-6 rounded-2xl text-xs font-bold uppercase tracking-widest">Uncountable</button>
                </div>
            </div>

            <div id="game-results" class="hidden glass rounded-[2.5rem] p-20 text-center border-white/10">
                <h2 class="text-5xl font-header font-bold text-white mb-4">Integrity Restored</h2>
                <p class="text-slate-400 text-lg font-light mb-12">Session analysis complete. Cognitive resonance achieved.</p>
                
                <div class="flex justify-center gap-12 mb-16">
                    <div class="text-center">
                        <p class="text-[10px] uppercase font-bold text-slate-500 tracking-widest mb-2">Sync Score</p>
                        <p id="final-score" class="text-5xl font-header font-bold text-indigo-400">0</p>
                    </div>
                    <div class="w-[1px] bg-white/10"></div>
                    <div class="text-center">
                        <p class="text-[10px] uppercase font-bold text-slate-500 tracking-widest mb-2">Max Pulse</p>
                        <p id="final-streak" class="text-5xl font-header font-bold text-emerald-400">x0</p>
                    </div>
                </div>

                <button onclick="switchView('game')" class="px-14 py-5 bg-indigo-600 text-white font-bold rounded-2xl hover:bg-indigo-500 transition-all shadow-2xl shadow-indigo-600/20">
                    Re-initialize Session
                </button>
            </div>
        </section>
    </main>

    <!-- Modal System -->
    <div id="noun-modal" class="fixed inset-0 bg-slate-950/90 hidden z-[100] flex items-center justify-center p-6 backdrop-blur-md">
        <div class="glass rounded-[2.5rem] max-w-2xl w-full p-12 border-white/10 relative shadow-2xl">
            <button onclick="closeModal()" class="absolute top-8 right-8 text-white/20 hover:text-white transition-colors text-2xl">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-content"></div>
        </div>
    </div>

    <script>
        const nounData = [
            { id: 'Common', title: 'Common', color: 'bg-emerald-500', icon: 'fas fa-layer-group', def: 'Non-specific identifiers for entities. These represent the generic architecture of the database.', tip: 'Low-priority tags. Never capitalized unless initializing a stream (sentence).', examples: ['city', 'tablet', 'person', 'ocean'] },
            { id: 'Proper', title: 'Proper', color: 'bg-purple-500', icon: 'fas fa-fingerprint', def: 'Unique, high-fidelity ID tags for specific entities. They denote singular, non-interchangeable instances.', tip: 'High-visibility markers. Look for mandated initial capitalization.', examples: ['Tokyo', 'Nasa', 'Einstein', 'Saturn'] },
            { id: 'Collective', title: 'Collective', color: 'bg-pink-500', icon: 'fas fa-network-wired', def: 'Nouns that treat a multi-unit cluster as a single logical entity.', tip: 'One data node representing many sub-units.', examples: ['herd', 'jury', 'committee', 'flock'] },
            { id: 'Compound', title: 'Compound', color: 'bg-sky-500', icon: 'fas fa-link', def: 'Multi-word constructs fused into a single semantic unit.', tip: 'Watch for concatenated strings, spaces, or hyphens.', examples: ['keyboard', 'bus stop', 'check-in'] },
            { id: 'Abstract', title: 'Abstract', color: 'bg-blue-600', icon: 'fas fa-wave-square', def: 'Intangible concepts or emotional states that exist without a physical render.', tip: 'Non-tactile data. Concepts rather than objects.', examples: ['truth', 'sorrow', 'luxury', 'strategy'] },
            { id: 'Concrete', title: 'Concrete', color: 'bg-yellow-500', icon: 'fas fa-cube', def: 'Material objects with high sensory resonance. They have physical volume and texture.', tip: 'If it can be scanned by human senses, it is concrete.', examples: ['brick', 'rain', 'pizza', 'violin'] },
            { id: 'Countable', title: 'Countable', color: 'bg-rose-500', icon: 'fas fa-hashtag', def: 'Discrete units that can be numerically indexed and transitioned into plural states.', tip: 'Support individual tallying (e.g., "five units").', examples: ['pencil', 'idea', 'chair', 'friend'] },
            { id: 'Uncountable', title: 'Uncountable', color: 'bg-lime-500', icon: 'fas fa-infinity', def: 'Continuous masses or abstract totals that cannot be separated into individual counts.', tip: 'Treated as singular totals. Usually fluids, gases, or powders.', examples: ['oxygen', 'advice', 'luggage', 'wood'] }
        ];

        const contextBank = [
            { sentence: "The entire <span class='text-indigo-400 font-bold'>orchestra</span> played in perfect harmony.", type: "Collective", hint: "A unified group of musicians." },
            { sentence: "Her <span class='text-indigo-400 font-bold'>kindness</span> touched everyone at the gala.", type: "Abstract", hint: "A quality that exists without physical form." },
            { sentence: "We visited <span class='text-indigo-400 font-bold'>Tokyo</span> during our summer break.", type: "Proper", hint: "A unique and specific geographical entity." },
            { sentence: "Please put the <span class='text-indigo-400 font-bold'>milk</span> back in the refrigerator.", type: "Uncountable", hint: "A liquid substance treated as a mass." },
            { sentence: "The <span class='text-indigo-400 font-bold'>firefighter</span> saved the kitten from the tree.", type: "Compound", hint: "Fire merged with Fighter." },
            { sentence: "I found a shiny <span class='text-indigo-400 font-bold'>coin</span> on the sidewalk.", type: "Countable", hint: "A discrete physical unit that can be tallied." },
            { sentence: "The <span class='text-indigo-400 font-bold'>mountain</span> was covered in thick snow.", type: "Concrete", hint: "A tangible physical structure." },
            { sentence: "The <span class='text-indigo-400 font-bold'>man</span> walked slowly down the street.", type: "Common", hint: "A generic identifier for a person." },
            { sentence: "A <span class='text-indigo-400 font-bold'>swarm</span> of bees followed the truck.", type: "Collective", hint: "A cluster of individuals acting as one." },
            { sentence: "His <span class='text-indigo-400 font-bold'>determination</span> was the key to his success.", type: "Abstract", hint: "A non-physical drive or feeling." },
            { sentence: "The <span class='text-indigo-400 font-bold'>Empire State Building</span> is iconic.", type: "Proper", hint: "A specific, capitalized structure name." },
            { sentence: "There is too much <span class='text-indigo-400 font-bold'>salt</span> in this soup.", type: "Uncountable", hint: "A granular mass often treated as a total." },
            { sentence: "Watch out for the <span class='text-indigo-400 font-bold'>blackboard</span> when you turn around.", type: "Compound", hint: "Black merged with Board." },
            { sentence: "He bought three <span class='text-indigo-400 font-bold'>bottles</span> of juice.", type: "Countable", hint: "Discrete objects that can be counted." }
        ];

        let score = 0, streak = 0, maxStreak = 0, timeLeft = 60, gameTimer, currentItem;

        window.onload = () => {
            document.getElementById('high-score').innerText = (localStorage.getItem('lexisHighScore') || 0).toString().padStart(4, '0');
            renderExplorer();
            switchView('explorer');
        };

        function renderExplorer() {
            document.getElementById('db-grid').innerHTML = nounData.map((n, i) => `
                <div onclick="openModal(${i})" class="glass glass-hover p-8 rounded-3xl cursor-pointer group">
                    <div class="${n.color} w-12 h-12 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-6 transition-all shadow-lg">
                        <i class="${n.icon} text-white text-xl"></i>
                    </div>
                    <h3 class="font-header font-bold text-xl mb-2 text-white/90">${n.title}</h3>
                    <p class="text-[10px] text-indigo-400/60 uppercase font-bold tracking-[0.2em]">Node Protocol Active</p>
                </div>
            `).join('');
        }

        function switchView(view) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(`view-${view}`).classList.remove('hidden');
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-tab'));
            document.getElementById(`nav-${view}`).classList.add('active-tab');
            if (view === 'game') {
                document.getElementById('game-intro').classList.remove('hidden');
                document.getElementById('game-active').classList.add('hidden');
                document.getElementById('game-results').classList.add('hidden');
            }
        }

        function openModal(index) {
            const n = nounData[index];
            document.getElementById('modal-content').innerHTML = `
                <div class="flex items-center gap-6 mb-10">
                    <div class="${n.color} w-20 h-20 rounded-[1.5rem] flex items-center justify-center text-4xl shadow-xl">
                        <i class="${n.icon} text-white"></i>
                    </div>
                    <div>
                        <h2 class="text-3xl font-header font-bold text-white">${n.title} Nodes</h2>
                        <p class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest mt-1">Classification Sequence: ${n.id}</p>
                    </div>
                </div>
                <div class="space-y-8">
                    <p class="text-slate-400 text-lg leading-relaxed font-light">${n.def}</p>
                    <div class="bg-white/5 border border-white/10 p-6 rounded-2xl">
                        <p class="text-[10px] uppercase font-bold text-indigo-400 tracking-widest mb-2">Technician Insight</p>
                        <p class="text-white italic font-light">${n.tip}</p>
                    </div>
                    <div>
                        <p class="text-[10px] uppercase font-bold text-slate-500 tracking-widest mb-4">Sample Assets</p>
                        <div class="flex flex-wrap gap-3">
                            ${n.examples.map(ex => `<span class="bg-white/5 border border-white/5 px-4 py-2 rounded-xl text-sm font-medium text-white/80">${ex}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('noun-modal').classList.remove('hidden');
        }

        function closeModal() { document.getElementById('noun-modal').classList.add('hidden'); }

        function startGame() {
            score = 0; streak = 0; maxStreak = 0; timeLeft = 60;
            updateHUD();
            document.getElementById('game-intro').classList.add('hidden');
            document.getElementById('game-active').classList.remove('hidden');
            nextQuestion();
            gameTimer = setInterval(() => {
                timeLeft -= 0.1;
                document.getElementById('timer-bar').style.width = `${(timeLeft / 60) * 100}%`;
                if (timeLeft <= 0) endGame();
            }, 100);
        }

        function nextQuestion() {
            currentItem = contextBank[Math.floor(Math.random() * contextBank.length)];
            const el = document.getElementById('sentence-display');
            el.style.opacity = 0;
            setTimeout(() => {
                el.innerHTML = `"${currentItem.sentence}"`;
                el.style.opacity = 1;
                document.getElementById('hint-btn').classList.remove('hidden');
            }, 200);
        }

        function handleAnswer(choice) {
            const cont = document.getElementById('game-container');
            if (choice === currentItem.type) {
                const points = 100 + (streak * 25);
                score += points;
                streak++;
                if (streak > maxStreak) maxStreak = streak;
                updateExp(points / 10);
                flashUI(true);
            } else {
                streak = 0;
                flashUI(false);
                cont.classList.add('shake');
                setTimeout(() => cont.classList.remove('shake'), 400);
            }
            updateHUD();
            nextQuestion();
        }

        function flashUI(correct) {
            const game = document.getElementById('game-active');
            game.style.boxShadow = `inset 0 0 100px ${correct ? 'rgba(16, 185, 129, 0.1)' : 'rgba(239, 68, 68, 0.1)'}`;
            setTimeout(() => game.style.boxShadow = 'none', 300);
        }

        function useHint() {
            if (score >= 50) {
                score -= 50;
                updateHUD();
                document.getElementById('sentence-display').innerHTML += `<p class="text-sm text-indigo-400 mt-6 animate-pulse italic"><i class="fas fa-search-plus mr-2"></i> ${currentItem.hint}</p>`;
                document.getElementById('hint-btn').classList.add('hidden');
            }
        }

        function updateHUD() {
            document.getElementById('game-score').innerText = score;
            document.getElementById('game-streak').innerText = `x${streak}`;
        }

        function updateExp(amount) {
            const exp = document.getElementById('exp-points');
            exp.innerText = Math.round(parseInt(exp.innerText) + amount);
        }

        function endGame() {
            clearInterval(gameTimer);
            document.getElementById('game-active').classList.add('hidden');
            document.getElementById('game-results').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            document.getElementById('final-streak').innerText = `x${maxStreak}`;
            const high = localStorage.getItem('lexisHighScore') || 0;
            if (score > high) {
                localStorage.setItem('lexisHighScore', score);
                document.getElementById('high-score').innerText = score.toString().padStart(4, '0');
            }
        }
    </script>
</body>
</html>
